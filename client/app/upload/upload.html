<div ng-include="'components/navbar/navbar.html'"></div>

<style>
.angular-google-map-container {
  height: 200px;
}
</style>

<div class="container">
  <div class="row">
    <div class="col-sm-8 col-md-6 col-sm-offset-2 col-md-offset-3">
      <h2 class="text-center">Upload new video</h2>
    </div>
  </div>

  <div class="row">

    <div class="col-sm-8 col-md-6 col-sm-offset-2 col-md-offset-3">
      <form class="form upload-form" name="form">

        <div class="form-group">
          <h4>1. Select a location by dragging the pin</h4>
          <ui-gmap-google-map center='map.center' zoom='map.zoom' draggable='true' height="200">
            <ui-gmap-marker coords="marker.coords" options="marker.options" events="marker.events" idkey="marker.id">
            </ui-gmap-marker>
          </ui-gmap-google-map>
        </div>

        <hr />

        <div class="form-group">
          <h4>2. Finalize video</h4>
        </div>

        <div class="form-group">
          <textarea  class="form-control" id="desc" ng-model="modal.description"
          placeholder="Write a caption">
          </textarea>
        </div>

        <div class="form-group">
           <button class="btn btn-primary"
             type="file"
             name="file"
             ng-model="video"
             ngf-select
             ngf-capture="'camera'"
             ngf-pattern="'video/*'"
             ngf-max-size="30MB"
             ngf-max-duration="30"
             required
            >
              <i class="fa fa-video-camera"></i>
              Upload
            </button>
            {{video.name}}
            <i ng-show="form.file.$error.required" class="has-error">*required</i>
        </div>

        <div class="form-group" ng-class="{'has-error': (form.video.$invalid && form.video.$dirty)}">
          <p class="help-block" ng-show="form.file.$error.maxSize">
            File too large
            {{video.size / 1000000|number:1}}MB: max 2M.
          </p>
          <p class="help-block" ng-show="form.file.$error.pattern">File format not supported.
          </p>
        </div>

        <div class="form-group">
          <video controls ngf-src="video" style="display: block; width: 100%"></video>
        </div>

        <hr />

        <div class="form-group" ng-show="video">
            <p>{{ (progress.MB|number:1) || 0 }}MB/{{ (video.size / 1000000|number:1) || 0}}MB</p>
            <progressbar value="progress.value"
                         type="{{progress.type}}"
                         active="progress.active"
                         class="progress-striped"
            ></progressbar>
        </div>

        <div class="form-group alert alert-danger" ng-show="error">{{error}}</div>

        <div class="form-group text-center">
          <button type="submit" class="btn btn-lg btn-primary" ng-click="submit(form)">submit</button>
        </div>
      </form>
    </div>
  </div>
</div>
